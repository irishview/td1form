<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TD1NB 2025 – New Brunswick Personal Tax Credits Return (Fillable)</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header>
    <h1>2025 New Brunswick Personal Tax Credits Return (TD1NB) — Fillable</h1>
    <div class="small">Mirrors CRA TD1NB-2025 fields. For guidance, see the official CRA instructions.</div>
  </header>

  <main>
    <form id="td1nbform" method="POST" action="/submit" novalidate>
      <!-- Personal information -->
      <section class="grid">
        <div class="col-6 field">
          <label>Last name</label>
          <input type="text" name="last_name" required />
        </div>
        <div class="col-6 field">
          <label>First name and initial(s)</label>
          <input type="text" name="first_name" required />
        </div>
        <div class="col-4 field">
          <label>Date of birth (YYYY-MM-DD)</label>
          <input type="date" name="dob" />
        </div>
        <div class="col-4 field">
          <label>Employee number</label>
          <input type="text" name="employee_number" />
        </div>
        <div class="col-12 field">
          <label>Address</label>
          <input type="text" name="address" />
        </div>
        <div class="col-4 field">
          <label>Postal code</label>
          <input type="text" name="postal_code" />
        </div>
        <div class="col-4 field">
          <label>Country of permanent residence (for non-residents only)</label>
          <input type="text" name="country_residence" />
        </div>
        <div class="col-4 field">
          <label>Social insurance number</label>
          <input type="text" name="sin" />
        </div>
      </section>

      <hr/>

      <!-- Lines 1–12 -->
      <section>
        <h2>Non-refundable tax credits (Lines 1–12)</h2>

        <div class="field">
          <label for="l1">1. Basic personal amount</label>
          <input id="l1" name="l1" type="number" step="0.01" value="13396" />
        </div>

        <div class="field">
          <label for="l2">2. Age amount</label>
          <input id="l2" name="l2" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l3">3. Pension income amount</label>
          <input id="l3" name="l3" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l4">4. Tuition amounts (full-time and part-time)</label>
          <input id="l4" name="l4" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l5">5. Disability amount</label>
          <input id="l5" name="l5" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l6">6. Spouse or common-law partner amount</label>
          <input id="l6" name="l6" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l7">7. Amount for an eligible dependant</label>
          <input id="l7" name="l7" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l8">8. Caregiver amount</label>
          <input id="l8" name="l8" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l9">9. Amount for infirm dependants age 18 or older</label>
          <input id="l9" name="l9" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l10">10. Amounts transferred from your spouse or common-law partner</label>
          <input id="l10" name="l10" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l11">11. Amounts transferred from a dependant</label>
          <input id="l11" name="l11" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="l12">12. TOTAL CLAIM AMOUNT (auto)</label>
          <input id="l12" name="l12" type="number" step="0.01" readonly />
        </div>
      </section>

      <hr/>

      <!-- Additional notes -->
      <section>
        <h2>Additional NB declarations</h2>
        <div class="note">
          <div class="checkbox">
            <input type="checkbox" id="multi_employers" name="multi_employers" />
            <label for="multi_employers">
              I have more than one employer or payer at the same time in 2025 and have already claimed credits elsewhere. 
              <em>Enter “0” on line 12 and do not fill lines 2–11.</em>
            </label>
          </div>
          <div class="checkbox">
            <input type="checkbox" id="total_less_claim" name="total_less_claim" />
            <label for="total_less_claim">
              My total income for the year from all employers/payers will be less than my total claim amount on line 12.
            </label>
          </div>
        </div>
      </section>

      <hr/>

      <!-- Certification -->
      <section>
        <div class="checkbox">
          <input type="checkbox" id="certify" name="certify" required />
          <label for="certify"><strong>I certify that the information given on this form is correct and complete.</strong></label>
        </div>

        <div class="signature">
          <div class="grid">
            <div class="col-8 field">
              <label>Signature</label>
              <input type="text" name="signature" placeholder="Type your full name" required />
            </div>
            <div class="col-4 field">
              <label>Date</label>
              <input type="date" name="signature_date" required />
            </div>
          </div>
          <div class="small">It is a serious offence to make a false return.</div>
        </div>
      </section>

      <hr/>

      <div style="display:flex; gap:10px;">
        <button class="primary" type="submit">Submit TD1NB</button>
        <button class="secondary" type="reset">Reset</button>
      </div>
    </form>
  </main>

  <footer>TD1NB 2025 (Unofficial fillable replica). This tool stores submissions locally on your server.</footer>

  <script>
    // Helper for safe number parsing
    const toNum = (id) => {
      const el = document.getElementById(id);
      return el ? parseFloat(el.value) || 0 : 0;
    };

    // Recalculate line 12
    function recalcNB(){
      const multi = document.getElementById('multi_employers')?.checked;
      const inputs = ['l2','l3','l4','l5','l6','l7','l8','l9','l10','l11'].map(id => document.getElementById(id));

      if (multi) {
        inputs.forEach(i => { if (i) { i.value = ''; i.disabled = true; } });
        document.getElementById('l12').value = 0;
        return;
      } else {
        inputs.forEach(i => { if (i) i.disabled = false; });
      }

      const total = toNum('l1')
        + toNum('l2') + toNum('l3') + toNum('l4') + toNum('l5')
        + toNum('l6') + toNum('l7') + toNum('l8') + toNum('l9')
        + toNum('l10') + toNum('l11');

      document.getElementById('l12').value = total.toFixed(2);
    }

    // Listen for changes
    document.addEventListener('input', (e) => {
      if (e.target.closest('#td1nbform')) recalcNB();
    });

    // Require certification
    document.getElementById('td1nbform')?.addEventListener('submit', (e) => {
      const certify = document.getElementById('certify');
      if (certify && !certify.checked) {
        e.preventDefault();
        alert('Please certify that the information is correct and complete before submitting.');
      }
    });
  </script>
</body>
</html>
